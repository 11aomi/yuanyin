# Chat模块详细架构设计

## 1. 模块划分
- 聊天核心模块（MVP分层：model/presenter/ui）
- 本地AI模型推理模块（人脸、语音、手势、物体、TTS）
- 权限与硬件管理模块
- 日志与数据管理模块

## 2. 职责说明
- 聊天核心：负责消息流转、UI渲染、用户交互。
- 本地推理：提供统一接口，供Presenter调用，实现本地AI推理。
- 权限管理：检测并申请摄像头、麦克风等权限。
- 日志管理：结构化存储所有识别、聊天、控制等事件。

## 3. 通信方式
- 各模块通过事件总线（EventBus/LiveData）或回调接口通信。
- 数据结构采用Kotlin数据类，必要时支持JSON/ProtoBuf序列化。

## 4. 主要流程
- 启动时初始化本地模型，检查权限。
- 采集图像/音频，推理后将结果通过事件流转到聊天/UI。
- 聊天窗口支持流式消息显示，TTS播报回复。
- 所有事件自动记录日志。 